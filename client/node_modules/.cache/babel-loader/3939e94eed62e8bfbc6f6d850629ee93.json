{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { VALIDGUESSES, WORDS } from \"../constants\";\nimport React, { useState } from 'react';\nimport { useStateRef } from \"../hooks\";\nimport { letterKeys, fullKeyboard } from '../constants.js';\nexport const useGameStatus = () => {\n  _s();\n\n  const [gameStatus, gameStatusRef, setGameStatus] = useStateRef(false);\n  const [currentRow, currentRowRef, setCurrentRow] = useStateRef([]);\n  const [history, historyRef, setHistory] = useStateRef([]);\n  const [error, setError] = useState(false);\n  const [winner, setWinner] = useState(null);\n  const [rematch, setRematch] = useState(false);\n  const [keyboard, setKeyboard] = useState(fullKeyboard);\n  const [counter, setCounter] = useState(0);\n  const [tie, setTie] = useState(false);\n\n  const checkKey = (e, wordle, client, clientID, gameID, user) => {\n    if (historyRef.current.length == 6 || gameStatusRef.current) return;\n\n    if (currentRowRef.current.length == 5) {\n      if (e.keyCode == 13) {\n        var word = currentRowRef.current;\n\n        if (!VALIDGUESSES.includes(word.join('')) && !WORDS.includes(word.join(''))) {\n          setError(true);\n          setTimeout(() => {\n            setError(false);\n          }, 2000);\n          return;\n        }\n\n        var target = wordle;\n        const final = computeGuess(currentRowRef.current, wordle);\n        setHistory([...historyRef.current, final]);\n        setCurrentRow([]);\n        client.send(JSON.stringify({\n          type: \"update\",\n          payload: {\n            rows: historyRef.current,\n            clientID: clientID,\n            gameID: gameID\n          }\n        }));\n\n        if (final.every(value => value.status == \"green\")) {\n          const data = {\n            type: \"winner\",\n            payload: {\n              winner: user,\n              gameID: gameID\n            }\n          };\n          client.send(JSON.stringify(data));\n          setWinner(true);\n          setRematch(true);\n          return;\n        }\n\n        if (historyRef.current.length == 6) {\n          const data = {\n            type: \"max\",\n            payload: {\n              gameID: gameID\n            }\n          };\n          client.send(JSON.stringify(data));\n        }\n      } else if (e.keyCode == 8) {\n        const tmp = currentRowRef.current.slice(0, currentRowRef.current.length - 1);\n        setCurrentRow(tmp);\n      }\n    } else if (e.keyCode == 8) {\n      const tmp = currentRowRef.current.slice(0, currentRowRef.current.length - 1);\n      setCurrentRow(tmp);\n    } else if (currentRowRef.current.length < 5) {\n      if (e.keyCode >= 65 && e.keyCode <= 90) {\n        setCurrentRow([...currentRowRef.current, e.key]);\n      }\n    }\n  };\n\n  const resetKeys = dirtyKeys => {\n    for (var i of Object.keys(dirtyKeys)) {\n      dirtyKeys[i].status = \"none\";\n    }\n\n    return dirtyKeys;\n  };\n\n  const colourKeys = initKeysOne => {\n    const idx = history.length - 1;\n\n    for (var i in history[idx]) {\n      const targetKey = history[idx][i].key;\n      if (initKeysOne[targetKey].status == \"green\") continue;\n      if (initKeysOne[targetKey].status == \"yellow\" && history[idx][i].status == \"gray\") continue;\n      initKeysOne[targetKey].status = history[idx][i].status;\n    }\n\n    return initKeysOne;\n  };\n\n  const computeGuess = (guess, wordle) => {\n    var target = wordle.split('');\n    var letters = guess;\n    var final = Array(target.length);\n    var unchecked = Array(target.length).fill(0);\n\n    for (var i in letters) {\n      if (letters[i] == target[i]) {\n        final[i] = {\n          key: letters[i],\n          status: \"green\"\n        };\n        unchecked[i] = 1;\n        target[i] = null;\n        letters[i] = null;\n      }\n    }\n\n    for (var j in letters) {\n      if (letters[j] == null) continue;\n\n      if (target.includes(letters[j])) {\n        final[j] = {\n          key: letters[j],\n          status: \"yellow\"\n        };\n        unchecked[j] = 1;\n        const idx = target.indexOf(letters[j]);\n        target[idx] = null;\n        letters[j] = null;\n      }\n    }\n\n    for (var k in unchecked) {\n      if (unchecked[k] == 0) {\n        final[k] = {\n          key: letters[k],\n          status: \"gray\"\n        };\n      }\n    }\n\n    return final;\n  };\n\n  const updateKeys = () => {\n    if (history.length > 0) {\n      const initKeys1 = fullKeyboard;\n      var initKeysOne = colourKeys(initKeys1, history);\n      setKeyboard(initKeysOne);\n      setCounter(counter + 1);\n    }\n  };\n\n  const resetGame = () => {\n    const dirty = fullKeyboard;\n    var newKeys = resetKeys(dirty);\n\n    if (!gameStatusRef.current) {\n      setTimeout(() => {\n        setKeyboard(newKeys);\n        setCounter(counter + 1);\n      }, 100);\n    }\n\n    setHistory([]);\n    setCurrentRow([]);\n    setWinner(null);\n    setTie(false);\n    window.addEventListener('keyup', middlewareKey);\n    return () => {\n      window.removeEventListener('keyup', middlewareKey);\n    };\n  };\n\n  return {\n    gameStatusRef,\n    setGameStatus,\n    currentRow,\n    currentRowRef,\n    setCurrentRow,\n    history,\n    historyRef,\n    setHistory,\n    error,\n    setError,\n    winner,\n    setWinner,\n    rematch,\n    setRematch,\n    resetKeys,\n    colourKeys,\n    checkKey,\n    counter,\n    setCounter,\n    updateKeys,\n    tie,\n    setTie\n  };\n};\n\n_s(useGameStatus, \"O6thfrh+Wv44Idc2tfExVBLg2nQ=\", false, function () {\n  return [useStateRef, useStateRef, useStateRef];\n});","map":{"version":3,"sources":["C:/Users/ytdan/OneDrive/Desktop/Computer Science/MERN/wordle-io/client/src/functions/handler.js"],"names":["VALIDGUESSES","WORDS","React","useState","useStateRef","letterKeys","fullKeyboard","useGameStatus","gameStatus","gameStatusRef","setGameStatus","currentRow","currentRowRef","setCurrentRow","history","historyRef","setHistory","error","setError","winner","setWinner","rematch","setRematch","keyboard","setKeyboard","counter","setCounter","tie","setTie","checkKey","e","wordle","client","clientID","gameID","user","current","length","keyCode","word","includes","join","setTimeout","target","final","computeGuess","send","JSON","stringify","type","payload","rows","every","value","status","data","tmp","slice","key","resetKeys","dirtyKeys","i","Object","keys","colourKeys","initKeysOne","idx","targetKey","guess","split","letters","Array","unchecked","fill","j","indexOf","k","updateKeys","initKeys1","resetGame","dirty","newKeys","window","addEventListener","middlewareKey","removeEventListener"],"mappings":"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","sourcesContent":["import { VALIDGUESSES, WORDS } from \"../constants\";\r\nimport React, {useState} from 'react'\r\nimport { useStateRef } from \"../hooks\";\r\nimport {letterKeys, fullKeyboard} from '../constants.js';\r\n\r\nexport const useGameStatus = () => {\r\n    const [gameStatus, gameStatusRef, setGameStatus] = useStateRef(false);\r\n    const [currentRow, currentRowRef, setCurrentRow] = useStateRef([])\r\n    const [history, historyRef, setHistory] = useStateRef([])\r\n    const [error, setError] = useState(false)\r\n    const [winner, setWinner] = useState(null);\r\n    const [rematch, setRematch] = useState(false);\r\n    const [keyboard, setKeyboard] = useState(fullKeyboard)\r\n    const [counter, setCounter] = useState(0)\r\n    const [tie, setTie] = useState(false)\r\n\r\n    const checkKey = (e, wordle, client, clientID, gameID, user)  => {\r\n        if (historyRef.current.length == 6 || gameStatusRef.current ) return;\r\n    \r\n      \r\n        if (currentRowRef.current.length == 5) {\r\n            \r\n            if (e.keyCode == 13) {\r\n               \r\n                var word = currentRowRef.current\r\n                if (!VALIDGUESSES.includes(word.join('')) && !WORDS.includes(word.join(''))) {\r\n                    setError(true);\r\n                    setTimeout(() => {\r\n                        setError(false)\r\n                    }, 2000)\r\n                    return \r\n                }\r\n           var target = wordle;\r\n           const final = computeGuess(currentRowRef.current, wordle);\r\n           setHistory([...historyRef.current, final])\r\n           setCurrentRow([])\r\n         \r\n           client.send(JSON.stringify({type: \"update\", payload: {rows: historyRef.current, clientID: clientID, gameID: gameID}}));\r\n           if (final.every((value) => value.status == \"green\")) {\r\n            const data = {\r\n                type: \"winner\",\r\n                payload: {\r\n                    winner: user,\r\n                    gameID: gameID\r\n                    }\r\n            }\r\n            client.send(JSON.stringify(data));\r\n            setWinner(true);\r\n            setRematch(true);\r\n            return;\r\n         }\r\n         if (historyRef.current.length == 6) {\r\n             const data = {\r\n                 type:\"max\",\r\n                 payload: {gameID: gameID}\r\n             }\r\n    \r\n             client.send(JSON.stringify(data));\r\n             \r\n         }\r\n            } \r\n            else if (e.keyCode == 8) {\r\n                const tmp = currentRowRef.current.slice(0, currentRowRef.current.length - 1)\r\n                setCurrentRow(tmp)\r\n            }\r\n        } else if (e.keyCode == 8) {\r\n            const tmp = currentRowRef.current.slice(0, currentRowRef.current.length - 1)\r\n            setCurrentRow(tmp)\r\n        } else if (currentRowRef.current.length < 5) {\r\n            if (e.keyCode >= 65 && e.keyCode <= 90) {\r\n                setCurrentRow([...currentRowRef.current, e.key])\r\n            }\r\n    \r\n        }\r\n        \r\n    }\r\n\r\n\r\n    const resetKeys = (dirtyKeys) => {\r\n        for (var i of Object.keys(dirtyKeys)) {\r\n            dirtyKeys[i].status = \"none\";\r\n        }\r\n        return dirtyKeys;\r\n    }\r\n\r\n     \r\n    const colourKeys = (initKeysOne) => {\r\n        const idx = history.length - 1;\r\n        for (var i in history[idx]) {\r\n            const targetKey = history[idx][i].key;\r\n            if (initKeysOne[targetKey].status == \"green\") continue;\r\n            if (initKeysOne[targetKey].status == \"yellow\" && history[idx][i].status == \"gray\") continue;\r\n            initKeysOne[targetKey].status = history[idx][i].status; \r\n        }\r\n        return initKeysOne;\r\n    }\r\n    const computeGuess = (guess, wordle) => {\r\n        var target = wordle.split('');\r\n        var letters = guess\r\n        var final = Array(target.length)\r\n        var unchecked = Array(target.length).fill(0);\r\n    \r\n\r\n\r\n        for (var i in letters) {\r\n            if (letters[i] == target[i]) {\r\n                final[i] = ({key: letters[i], status: \"green\"})\r\n                unchecked[i] = 1\r\n                target[i] = null;\r\n                letters[i] = null;\r\n                \r\n            }\r\n        }\r\n\r\n        for (var j in letters) {\r\n            if (letters[j] == null) continue;\r\n            if (target.includes(letters[j])) {\r\n                final[j] = ({key: letters[j], status: \"yellow\"})\r\n                unchecked[j] = 1;\r\n                const idx = target.indexOf(letters[j]);\r\n                target[idx] = null;\r\n                letters[j] = null;\r\n            }\r\n        }\r\n\r\n        for (var k in unchecked) {\r\n            if (unchecked[k] == 0) {\r\n                final[k] = ({key: letters[k], status: \"gray\"});\r\n            }\r\n        }\r\n    \r\n        return final;\r\n\r\n    }\r\n    \r\n    const updateKeys = () => {\r\n        if (history.length > 0) {\r\n            const initKeys1 = fullKeyboard;\r\n            var initKeysOne = colourKeys(initKeys1, history);\r\n        setKeyboard(initKeysOne)\r\n        setCounter(counter + 1)\r\n        }\r\n    }\r\n\r\n    const resetGame = () => {\r\n        const dirty = fullKeyboard;\r\n    var newKeys = resetKeys(dirty);\r\n    if (!gameStatusRef.current) {\r\n        setTimeout(() => {\r\n            setKeyboard(newKeys)\r\n            setCounter(counter + 1)\r\n        }, 100)\r\n    }\r\n    setHistory([])\r\n    setCurrentRow([]);\r\n    setWinner(null);\r\n    setTie(false)\r\n    window.addEventListener('keyup', middlewareKey);\r\n    \r\n    return () => {\r\n        window.removeEventListener('keyup', middlewareKey)\r\n    }\r\n    }\r\n    return {gameStatusRef, setGameStatus, currentRow, currentRowRef, setCurrentRow, history, historyRef, setHistory, error, setError, winner, setWinner, rematch, setRematch, resetKeys, colourKeys, checkKey, counter, setCounter, updateKeys, tie, setTie}\r\n\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}