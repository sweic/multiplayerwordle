{"ast":null,"code":"import { VALIDGUESSES, WORDS } from \"../constants\";\nexport function checkKey(e, historyRef, gameStatusRef, currentRowRef, setHistory, setCurrentRow, setWinner, setRematch, setError, wordle, client, clientID, gameID, user) {\n  if (historyRef.current.length == 6 || gameStatusRef.current) return;\n  console.log(e.keyCode);\n  console.log(e.key);\n\n  if (currentRowRef.current.length == 5) {\n    if (e.keyCode == 13) {\n      console.log(\"entered\");\n      var word = currentRowRef.current;\n      console.log(word);\n\n      if (!VALIDGUESSES.includes(word.join('')) && !WORDS.includes(word.join(''))) {\n        setError(true);\n        setTimeout(() => {\n          setError(false);\n        }, 2000);\n        return;\n      }\n\n      var target = wordle;\n      var final = [];\n\n      for (var i in word) {\n        var status = \"gray\";\n\n        if (word[i] == target[i]) {\n          status = \"green\";\n          target = target.replace(word[i], \" \");\n        } else if (target.includes(word[i])) {\n          status = \"yellow\";\n          target = target.replace(word[i], \" \");\n        }\n\n        final.push({\n          key: word[i],\n          status: status\n        });\n      }\n\n      setHistory([...historyRef.current, final]);\n      setCurrentRow([]); //    dispatch({type: actionTypes.ACCEPT_RESPONSE, payload: final})\n\n      client.send(JSON.stringify({\n        type: \"update\",\n        payload: {\n          rows: historyRef.current,\n          clientID: clientID,\n          gameID: gameID\n        }\n      })); //    setCurrentRow([])\n\n      if (final.every(value => value.status == \"green\")) {\n        const data = {\n          type: \"winner\",\n          payload: {\n            winner: user,\n            gameID: gameID\n          }\n        };\n        client.send(JSON.stringify(data));\n        setWinner(true);\n        setRematch(true);\n      }\n    } else if (e.keyCode == 8) {\n      const tmp = currentRowRef.current.slice(0, currentRowRef.current.length - 1);\n      setCurrentRow(tmp);\n    }\n  } else if (e.keyCode == 8) {\n    const tmp = currentRowRef.current.slice(0, currentRowRef.current.length - 1);\n    setCurrentRow(tmp);\n  } else if (currentRowRef.current.length < 5) {\n    if (e.keyCode >= 65 && e.keyCode <= 90) {\n      setCurrentRow([...currentRowRef.current, e.key]);\n    }\n  }\n}\nexport function middlewareKey(e, historyRef, gameStatusRef, currentRowRef, setHistory, setCurrentRow, setWinner, setRematch, setError, wordle, client, clientID, gameID, user) {\n  checkKey(e, historyRef, gameStatusRef, currentRowRef, setHistory, setCurrentRow, setWinner, setRematch, setError, wordle, client, clientID, gameID, user);\n}","map":{"version":3,"sources":["C:/Users/ytdan/OneDrive/Desktop/Computer Science/MERN/wordleio/client/src/functions/handler.js"],"names":["VALIDGUESSES","WORDS","checkKey","e","historyRef","gameStatusRef","currentRowRef","setHistory","setCurrentRow","setWinner","setRematch","setError","wordle","client","clientID","gameID","user","current","length","console","log","keyCode","key","word","includes","join","setTimeout","target","final","i","status","replace","push","send","JSON","stringify","type","payload","rows","every","value","data","winner","tmp","slice","middlewareKey"],"mappings":"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","sourcesContent":["import { VALIDGUESSES, WORDS } from \"../constants\";\r\n\r\nexport function checkKey(e, historyRef, gameStatusRef, currentRowRef, setHistory, setCurrentRow, setWinner, setRematch, setError, wordle, client, clientID, gameID, user) {\r\n    if (historyRef.current.length == 6 || gameStatusRef.current ) return;\r\n    console.log(e.keyCode);\r\n    console.log(e.key);\r\n    \r\n    if (currentRowRef.current.length == 5) {\r\n        \r\n        if (e.keyCode == 13) {\r\n            console.log(\"entered\");\r\n            var word = currentRowRef.current\r\n\r\n            console.log(word);\r\n            if (!VALIDGUESSES.includes(word.join('')) && !WORDS.includes(word.join(''))) {\r\n                setError(true);\r\n                setTimeout(() => {\r\n                    setError(false)\r\n                }, 2000)\r\n                return \r\n            }\r\n       var target = wordle;\r\n       var final = []\r\n       for (var i in word) {\r\n           var status = \"gray\"\r\n           if (word[i] == target[i]) {\r\n               status = \"green\"\r\n               target = target.replace(word[i], \" \")\r\n           } else if (target.includes(word[i])) {\r\n               status = \"yellow\"\r\n               target = target.replace(word[i], \" \")\r\n           } \r\n           final.push({key: word[i], status: status});\r\n          \r\n       }\r\n       setHistory([...historyRef.current, final])\r\n       setCurrentRow([])\r\n     \r\n    //    dispatch({type: actionTypes.ACCEPT_RESPONSE, payload: final})\r\n       client.send(JSON.stringify({type: \"update\", payload: {rows: historyRef.current, clientID: clientID, gameID: gameID}}));\r\n    //    setCurrentRow([])\r\n       if (final.every((value) => value.status == \"green\")) {\r\n        const data = {\r\n            type: \"winner\",\r\n            payload: {\r\n                winner: user,\r\n                gameID: gameID\r\n                }\r\n        }\r\n        client.send(JSON.stringify(data));\r\n        setWinner(true);\r\n        setRematch(true);\r\n     }\r\n        } \r\n        else if (e.keyCode == 8) {\r\n            const tmp = currentRowRef.current.slice(0, currentRowRef.current.length - 1)\r\n            setCurrentRow(tmp)\r\n        }\r\n    } else if (e.keyCode == 8) {\r\n        const tmp = currentRowRef.current.slice(0, currentRowRef.current.length - 1)\r\n        setCurrentRow(tmp)\r\n    } else if (currentRowRef.current.length < 5) {\r\n        if (e.keyCode >= 65 && e.keyCode <= 90) {\r\n            setCurrentRow([...currentRowRef.current, e.key])\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\nexport function middlewareKey(e, historyRef, gameStatusRef, currentRowRef, setHistory, setCurrentRow, setWinner, setRematch, setError, wordle, client, clientID, gameID, user) {\r\n    checkKey(e, historyRef, gameStatusRef, currentRowRef, setHistory, setCurrentRow, setWinner, setRematch, setError, wordle, client, clientID, gameID, user)\r\n}"]},"metadata":{},"sourceType":"module"}